document.querySelectorAll(".information_tab").forEach(a=>{a.onclick=function(){document.querySelector(".information_content.active").classList.remove("active"),document.querySelector(".information_show").children[a.dataset.tab].classList.add("active")}});let DIV,selector;async function getInfo(a){let b=event.target;if("P"==b.tagName){let c=document.querySelector("."+a+"[data-id='"+b.dataset.id+"']");if(!c){let c=new FormData;c.append("ajaxSettings","plugins:cabinet:getInfo"),c.append("id",b.dataset.id),c.append("entity",a);let d=await fetch("/Ajax.php",{method:"POST",body:c}),e=await d.json();DIV=document.createElement("div"),DIV.className=a+" actived",DIV.dataset.id=e.id;let f="order"==a?b.nextElementSibling:b;f.after(DIV);({order:renderOrder,tariff:renderTariff,option:renderOption})[a](e)}else c.classList.toggle("actived")}else"IMG"==b.tagName&&deleteItem(b)}function renderOrder(a){selector="block",create("div","\u0417\u0430\u043A\u0430\u0437\u0447\u0438\u043A:",a.user.name),create("div","\u041D\u0430 \u0441\u0443\u043C\u043C\u0443:",a.price+" \u20BD"),create("hr"),create("h3","\u0422\u0430\u0440\u0438\u0444\u044B:");for(let b=0;b<a.order.offers.length;b++)create("div",a.order.offers[b].name,a.order.offers[b].price+" \u20BD");if(create("hr"),create("div","\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439:",a.order.users),create("div","\u0411\u0430\u0437 \u0434\u0430\u043D\u043D\u044B\u0445:",a.order.bases),create("div","\u041D\u0430 \u043F\u0435\u0440\u0438\u043E\u0434:",a.order.period),create("hr"),a.order.hasOwnProperty("calculator")){create("h3","\u0412\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u043E\u043F\u0446\u0438\u0438:");for(let b=0;b<a.order.calculator.length;b++)create("div",a.order.calculator[b].name,a.order.calculator[b].price+" \u20BD");create("hr")}create("div","\u0414\u0430\u0442\u0430:",a.date)}function renderTariff(a){selector="form",create("div","\u0418\u043C\u044F:",a.name),create("div","\u0426\u0435\u043D\u0430:",a.price),create("div","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435:",a.description),create("button")}function renderOption(a){selector="form",create("div","\u0422\u0438\u043F:",a.type),create("div","ID:",a.item),create("div","\u0418\u043C\u044F:",a.name),create("div","\u0426\u0435\u043D\u0430:",a.price),create("div","\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u044F:",a.recommend),create("div","\u041E\u043F\u0446\u0438\u044F:",a.option),create("div","\u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0430:",a.hint),create("button")}function create(a,b=[],c=[]){let d=document.createElement(a);if(DIV.append(d),"block"==selector){if("div"==a){d.className=selector;let a=document.createElement("p");a.textContent=b,d.append(a);let e=document.createElement("span");e.textContent=c,d.append(e)}else"h3"==a&&(d.textContent=b);}else if("form"==selector)if("div"==a){d.className=selector;let a=document.createElement("label");if(a.textContent=b,d.append(a),"\u0422\u0438\u043F:"==b){let a=document.createElement("select");d.append(a);let b={button:"\u041A\u043D\u043E\u043F\u043A\u0430",count:"\u0421\u0447\u0451\u0442\u0447\u0438\u043A"};for(let d in b){let e=document.createElement("option");c==d&&(e.selected=!0),e.value=d,e.textContent=b[d],a.append(e)}}else{let e=document.createElement("input");"\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u044F:"==b?(a.className="mobile",d.className+=" row",e.type="checkbox",e.className="recommend",c?(e.checked=!0,e.value=1):e.value=0,e.onclick=a=>{a.target.value=1==a.target.value?0:1}):e.value=c,d.append(e)}}else d.type="submit",d.textContent="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",d.onclick=function(){update(DIV)}}async function deleteItem(a){if(confirm("\u0412\u044B \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435?")){let b=new FormData;b.append("ajaxSettings","plugins:cabinet:deleteItem"),b.append("id",a.dataset.id),await fetch("/Ajax.php",{method:"POST",body:b}),a.parentNode.remove(),document.querySelector(".order_tab")||document.querySelector(".orders_tabs").append("\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043A\u0430\u0437\u043E\u0432 \u043F\u0443\u0441\u0442.")}}async function update(a){let b=new FormData;b.append("ajaxSettings","plugins:cabinet:updateSettings"),b.append("id",a.dataset.id),b.append("entity",a.className);let d=a.querySelectorAll(".form"),e=0;for(let c of d)b.append(e+"_",c.children[1].value),e++;await fetch("/Ajax.php",{method:"POST",body:b}),b=null}